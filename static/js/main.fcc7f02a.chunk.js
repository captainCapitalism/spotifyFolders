(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,,,,,,,,function(e,t,n){e.exports=n(37)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(7),l=n.n(o),c=(n(21),n(22),["user-top-read","user-read-currently-playing","user-read-playback-state"]),i=function(){var e="".concat("https://accounts.spotify.com/authorize","?client_id=").concat("d1a0665e24ed48988743999128befc8e","&redirect_uri=").concat("https://captaincapitalism.github.io/spotifyFolders/","&scope=").concat(c.join("%20"),"&response_type=token&show_dialog=true");return r.a.createElement("a",{className:"btn App-link",href:e},"Login with Spotify")},d=(n(23),function(){return localStorage.hasOwnProperty("folders")?JSON.parse(localStorage.getItem("folders")):(localStorage.setItem("folders",JSON.stringify([])),[])}),s=function(e){return localStorage.setItem("folders",JSON.stringify(e)),e},u=function(e){var t=d().filter(function(t){return t.id!==e});return s(t)},m=function(e){return{name:e.album.name,id:e.album.id,artist:e.album.artists[0].name,url:e.album.external_urls.spotify,img:e.album.images[1].url}},f=function(e,t){var n=e.className.split(" ");-1===n.indexOf(t)?(n.push(t),e.className=n.join(" ")):e.className=n.splice(t,1).join(" ")},b=n(1),p="ERROR",h=function(e){var t=e.target,n=document.getElementById("album-container"),a=document.getElementById("folder-container");f(n,"hidden"),"hide albums"===t.innerHTML?(t.innerHTML="show albums",a.style.width="100%"):(t.innerHTML="hide albums",a.style.width="")},E=function(e){var t=e.target,n=document.getElementById("folder-container"),a=document.getElementById("album-container");f(n,"hidden"),"hide folders"===t.innerHTML?(t.innerHTML="show folders",a.style.width="100%"):(t.innerHTML="hide folders",a.style.width="")},y=function(){!function(e,t){var n="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(e,null,4)),a=document.createElement("a");a.setAttribute("href",n),a.setAttribute("download",t+".json"),document.body.appendChild(a),a.click(),a.remove()}(d(),"myFolders")};var g=Object(b.b)(null,{setFolders:function(e){return function(t){s(e),t({type:"SET_FOLDERS",payload:e})}},removeFolders:function(){return function(e){s([]),e({type:"REMOVE_FOLDERS",payload:[]})}}})(function(e){return r.a.createElement("header",null,r.a.createElement("button",{className:"header-btn",onClick:h},"hide albums"),r.a.createElement("button",{className:"header-btn",onClick:E},"hide folders"),r.a.createElement("button",{className:"header-btn remove-btn",onClick:function(){e.removeFolders()}},"remove my folders"),r.a.createElement("button",{className:"header-btn download-btn",onClick:function(){document.getElementById("upload-folders").click()}},"upload my folders"),r.a.createElement("input",{id:"upload-folders",style:{display:"none"},type:"file",onChange:function(t){var n=t.target.files[0];if("json"===n.name.split(".")[1]){console.log(n),console.log("well don");var a=new FileReader;a.onload=function(){var t=a.result;e.setFolders(JSON.parse(t))},a.readAsText(n)}else console.log("bad format, I need JSON file")}}),r.a.createElement("button",{className:"header-btn download-btn",onClick:y},"download my folders"))}),v=(n(30),function(){return r.a.createElement("div",{id:"welcome"},r.a.createElement("p",null,"Hi"),r.a.createElement("br",null),r.a.createElement("main",null,r.a.createElement("p",null,"While exploring Spotify I started to drown in multitude of albums I saved and I could not manage my music anymore. After few searches I could not find appropriate solution and I only found that feature like folders was requested years ago already but with no positive response from devs or support."),r.a.createElement("br",null),r.a.createElement("p",null,"Right now it is very unpolished and quite cheaty since project does not use any proper database to store your data but folder structure is saved in browser's storage so it will not be available on other devices unless you will use JSON file that site can let you download and when you clear your browser data structure might be lost."),r.a.createElement("br",null),r.a.createElement("p",null,"So as you can guess I made it purely with myself in mind. However I will be extremely happy if at least one person will find value while using this project."),r.a.createElement("br",null),r.a.createElement("p",null,"You can check out code on my GitHub account, feel free to leave there or with form any feedback you have on mind since user input will help me grow and polish project."),r.a.createElement("br",null),r.a.createElement("p",{id:"sign"},"Enjoy,",r.a.createElement("br",null),"Micha\u0142")))}),O=(n(31),function(e){return r.a.createElement("div",{id:(e.prefix?e.prefix:"")+e.album.id,className:"album"},r.a.createElement("a",{href:e.album.url,target:"_blank"},r.a.createElement("img",{alt:"",src:e.album.img})),r.a.createElement("div",{className:"album-name"},r.a.createElement("strong",null,e.album.name)),r.a.createElement("div",{className:"album-artist"},e.album.artist),e.enhancement)}),w=Object(b.b)(null,{addAlbumToFolder:function(e,t){return function(n){var a=function(e,t){var n=d(),a=n.map(function(e){return e.name}).indexOf(e);return 0===n[a].albums.filter(function(e){return e.id===t.id}).length?(n[a].albums.push(t),{code:201,folders:n}):{code:400,msg:"Album already in folder"}}(e,t);201===a.code?n({type:"ADD_ALBUM_TO_FOLDER",payload:a.folders}):a.code>=400&&a.code<500?(console.log(a.err),n({type:p,payload:a.err})):n({type:p,payload:"Unknown code"})}}})(function(e){var t=r.a.createElement("div",{className:"album-add-to-folder"},r.a.createElement("button",{onClick:function(t){var n=t.target.nextElementSibling.value;e.addAlbumToFolder(n,e.album)}},"Add to"),e.children);return r.a.createElement(O,Object.assign({},e,{idPrefix:"folderless",enhancement:t}))}),k=(n(32),Object(b.b)(function(e){return{folders:e.folders.folders}})(function(e){return r.a.createElement("select",{className:"folder-selection"},e.folders.map(function(e,t){return r.a.createElement("option",{key:t},e.name)}))})),F=Object(b.b)(function(e){return{folders:e.folders.folders}})(function(e){var t=r.a.createElement(k,null);return r.a.createElement("div",{id:"album-container",className:"album-container"},e.albums.map(function(e){return r.a.createElement(w,{key:"folderless-"+e.id,album:e,children:t})}))}),N=function(e){return r.a.createElement("div",null,"Hello General Kenobi, I fetched ",e.fetched,"% of your albums")},j=(n(33),n(34),Object(b.b)(null,{removeAlbumFromFolder:function(e,t){return function(n){var a=function(e,t){var n=d(),a=n.map(function(e){return e.name}).indexOf(t),r=n[a].albums.map(function(e){return e.id}).indexOf(e);return-1!==r?(n[a].albums.splice(r,1),{code:200,folders:n}):{code:400,msg:"Album not in the folder"}}(e,t);200===a.code?n({type:"REMOVE_ALBUM_FROM_FOLDER",payload:a.folders}):a.code>=400&&a.code<500?(console.log(a.err),n({type:p,payload:a.err})):n({type:p,payload:"Unknown code"})}}})(function(e){var t=r.a.createElement("button",{className:"header-btn remove-btn",onClick:function(t){t.target;var n=e.folderName,a=e.album.id;e.removeAlbumFromFolder(a,n)}},"Remove from folder");return r.a.createElement(O,Object.assign({},e,{idPrefix:"foldered",enhancement:t}))})),T=Object(b.b)(null,{removeFolder:function(e){return function(t){t({type:"REMOVE_FOLDER",payload:{folders:u(e)}})}}})(function(e){return r.a.createElement("div",{id:"folder-".concat(e.data.id),className:"folder"},r.a.createElement("div",null,r.a.createElement("div",{className:"folder-name"},r.a.createElement("strong",{onClick:function(e){var t=e.target.parentElement.parentElement.nextElementSibling;f(t,"hidden")}},e.data.name)),r.a.createElement("button",{className:"header-btn remove-btn",onClick:function(){return e.removeFolder(e.data.id)}},"Remove folder!")),r.a.createElement("div",{className:"foldered-album-container hidden"},e.data.albums.map(function(t,n){return r.a.createElement(j,{key:"foldered-".concat(n,"-").concat(t.id),folderName:e.data.id,album:t})})))}),L=n(15),_=(n(35),Object(b.b)(function(e){return{folders:e.folders.folders}},{addFolder:function(e){return function(t){var n=function(e){if(""===e)return{err:"No name provided",code:400};var t=d();if(-1===t.map(function(e){return e.name}).indexOf(e)){var n={id:e,name:e,albums:[]};return t.unshift(n),{code:201,body:n}}return{code:400,err:"Folder with given name already exists"}}(e);201===n.code?t({type:"ADD_FOLDER",payload:{folder:[n.body]}}):n.code>=400&&n.code<500?(console.log(n.err),t({type:p,payload:n.err})):t({type:p,payload:"Unknown code"})}}})(function(e){var t=Object(a.useState)(""),n=Object(L.a)(t,2),o=n[0],l=n[1];return r.a.createElement("header",{id:"folder-creator"},r.a.createElement("input",{id:"new-folder-name",onChange:function(e){var t;(t=e.target.value,function(e){return e(t)})(l)},type:"text",placeholder:"folder name",value:o}),r.a.createElement("button",{className:"header-btn",onClick:function(){e.addFolder(o),l("")}},"Create folder"))})),z=Object(b.b)(function(e){return{folders:e.folders.folders}})(function(e){return s(e.folders),function(e){return r.a.createElement("div",{id:"folder-container",className:"folder-container"},r.a.createElement(_,null),r.a.createElement("div",{id:"folders"},e.folders.map(function(e){return r.a.createElement(T,{key:"folder"+e.id,data:e})})))}(e)}),M=window.location.hash.substring(1).split("&").reduce(function(e,t){if(t){var n=t.split("=");e[n[0]]=decodeURIComponent(n[1])}return e},{});window.location.hash="";var R=M,S=(n(36),function(){return r.a.createElement("footer",{id:"footer"},r.a.createElement("a",{href:"https://github.com/captainCapitalism/spotifyFolders",target:"_blank"},r.a.createElement("img",{src:"githubIcon.png",alt:"GitHub icon"})),r.a.createElement("a",{className:"link",href:"https://forms.gle/z6XAwYTJbe36a9DH6",target:"_blank"},r.a.createElement("i",{className:"far fa-file-alt"})))}),A=[{name:"Nonagon Infinity",id:"7hpznmwqB8FM05bEpN9P94",artist:"King Gizzard & The Lizard Wizard",url:"https://open.spotify.com/album/7hpznmwqB8FM05bEpN9P94",img:"https://i.scdn.co/image/a7d7f91a7612ef79fc9db56faed0f84379f2c447"},{name:"Flying Microtonal Banana",id:"0BJrif4AO6vWEtLRYYC3T2",artist:"King Gizzard & The Lizard Wizard",url:"https://open.spotify.com/album/0BJrif4AO6vWEtLRYYC3T2",img:"https://i.scdn.co/image/d373ed125cab1a07c20cf6182209806f7514f285"},{name:"Gumboot Soup",id:"4TKNK51FGyUaBt98lsU2BF",artist:"King Gizzard & The Lizard Wizard",url:"https://open.spotify.com/album/4TKNK51FGyUaBt98lsU2BF",img:"https://i.scdn.co/image/8a9aee3ce946767d9e6c0dfa3b3d454e582ef412"},{name:"Oddments",id:"2DKCPWXAyXPq2dr1ZahO9p",artist:"King Gizzard & The Lizard Wizard",url:"https://open.spotify.com/album/2DKCPWXAyXPq2dr1ZahO9p",img:"https://i.scdn.co/image/b893d74027421324599f2a524b906dc9e8c98b4c"},{name:"Polygondwanaland",id:"7LKjFAk60OgMLvRdfM93g8",artist:"King Gizzard & The Lizard Wizard",url:"https://open.spotify.com/album/7LKjFAk60OgMLvRdfM93g8",img:"https://i.scdn.co/image/2766f07fd1e6b464a2e793892ff7a49527a91cb3"},{name:"Fishing For Fishies",id:"4Tgecn5UTVK57G0IV3MyB6",artist:"King Gizzard & The Lizard Wizard",url:"https://open.spotify.com/album/4Tgecn5UTVK57G0IV3MyB6",img:"https://i.scdn.co/image/6a64b93237a9ce48c9c5cd59907384b61028dd34"},{name:"Bloody Ripper",id:"6kRWVLVNcvaf4vgMZC2ANB",artist:"King Gizzard & The Lizard Wizard",url:"https://open.spotify.com/album/6kRWVLVNcvaf4vgMZC2ANB",img:"https://i.scdn.co/image/fb0d874c66406bc1380f947069ba090ef457a167"},{name:"I'm In Your Mind Fuzz",id:"1us1SPW98rVMh2zzHqSYSI",artist:"King Gizzard & The Lizard Wizard",url:"https://open.spotify.com/album/1us1SPW98rVMh2zzHqSYSI",img:"https://i.scdn.co/image/2e297ddbe70f6b989bb13c9a4fc94ca2d51668e9"}],D=Object(b.b)(function(e){return{token:e.app.token,albums:e.albums.albums,albumProgress:e.albums.albumProgress,demo:e.app.demo}},{fetchFolders:function(){return function(e){e({type:"FETCH_FOLDERS",payload:d()})}},getToken:function(){return function(e){e({type:"GET_TOKEN",payload:{token:R.access_token}})}},fetchAlbums:function e(t){var n=t.url,a=void 0===n?"https://api.spotify.com/v1/me/albums?limit=50":n,r=t.token;return function(t){fetch(a,{method:"get",headers:{Authorization:"Bearer "+r}}).then(function(e){return e.json()}).then(function(n){var a=n.items.map(m);n.next&&t(e({url:n.next,token:r}));var o=(n.offset+n.limit)/n.total,l=o<1?Math.round(1e4*o)/100:100;t({type:"FETCH_ALBUMS",payload:a,albumProgress:l})}).catch(function(e){t({type:p,payload:e})})}},setDemo:function(){return function(e){e({type:"SET_DEMO"})}}})(function(e){return Object(a.useEffect)(function(){e.fetchFolders(),e.getToken()},[]),Object(a.useEffect)(function(){e.token&&e.fetchAlbums({token:e.token})},[e.token]),e.token&&100===e.albumProgress?r.a.createElement("div",{className:"App container"},r.a.createElement(g,null),r.a.createElement(F,{albums:e.albums,folders:e.folders}),r.a.createElement(z,null),r.a.createElement(S,null)):e.token&&100!==e.albumProgress?r.a.createElement("div",{className:"App"},r.a.createElement(N,{fetched:e.albumProgress})):e.demo?r.a.createElement("div",{className:"App container"},r.a.createElement(g,null),r.a.createElement(F,{albums:A,folders:[]}),r.a.createElement(z,null),r.a.createElement(S,null)):r.a.createElement("div",null,r.a.createElement("div",{className:"App container-column welcome"},r.a.createElement(v,null),r.a.createElement(i,null),r.a.createElement("button",{onClick:e.setDemo,className:"btn"},"Take me to demo!")),r.a.createElement(S,null))}),C=n(4),I=n(14),B=n(3),P=n(2),x={folders:[]},K={},W={albums:[],albumProgress:0},G={token:null,demo:!1},H=Object(C.c)({app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_TOKEN":return Object(P.a)({},e,{token:t.payload.token});case"SET_DEMO":return Object(P.a)({},e,{demo:!e.demo});default:return e}},albums:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_ALBUMS":return Object(P.a)({},e,{albums:[].concat(Object(B.a)(t.payload),Object(B.a)(e.albums)),albumProgress:t.albumProgress});default:return e}},folders:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_FOLDER":return Object(P.a)({},e,{folders:[].concat(Object(B.a)(t.payload.folder),Object(B.a)(e.folders))});case"FETCH_FOLDERS":return Object(P.a)({},e,{folders:[].concat(Object(B.a)(t.payload),Object(B.a)(e.folders))});case"REMOVE_FOLDER":return Object(P.a)({},e,{folders:Object(B.a)(t.payload.folders)});case"ADD_ALBUM_TO_FOLDER":case"REMOVE_ALBUM_FROM_FOLDER":case"SET_FOLDERS":return Object(P.a)({},e,{folders:Object(B.a)(t.payload)});case"REMOVE_FOLDERS":return Object(P.a)({},e,{folders:[]});default:return e}},errors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return Object(P.a)({},e,{err:t.payload});default:return e}}}),U=[I.a],V=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||C.d,J=Object(C.e)(H,V(C.a.apply(void 0,U)));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(b.a,{store:J},r.a.createElement(D,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[16,1,2]]]);
//# sourceMappingURL=main.fcc7f02a.chunk.js.map